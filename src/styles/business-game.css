/* Commodity Exchange Terminal Styles */

/* Money Counter */
.money-counter {
    background: var(--theme-terminal-bg);
    border: 2px inset var(--theme-border-dark);
    padding: 6px 14px;
    font-family: "Courier New", monospace;
    font-size: 16px;
    font-weight: bold;
    min-width: 80px;
    text-align: center;
    position: relative;
}

.money-value {
    color: var(--theme-terminal-text);
    text-shadow: 0 0 5px var(--theme-terminal-glow);
    transition: all 0.1s ease;
}

.money-value.money-flash {
    transform: scale(1.1);
}

.money-value.money-win {
    color: var(--theme-terminal-text);
    text-shadow: 0 0 10px var(--theme-terminal-glow), 0 0 20px var(--theme-terminal-glow);
    animation: money-pulse-win 0.5s ease;
}

.money-value.money-lose {
    color: var(--theme-color-danger);
    text-shadow: 0 0 10px var(--theme-color-danger);
    animation: money-shake 0.5s ease;
}

@keyframes money-pulse-win {
    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.2);
    }
}

@keyframes money-shake {
    0%,
    100% {
        transform: translateX(0);
    }

    20%,
    60% {
        transform: translateX(-3px);
    }

    40%,
    80% {
        transform: translateX(3px);
    }
}

/* Market Ticker */
.market-ticker {
    display: flex;
    align-items: center;
    gap: 4px;
    flex: 1;
    overflow: hidden;
    font-family: "Courier New", monospace;
    font-size: 14px;
    background: var(--theme-terminal-bg);
    border: 2px inset var(--theme-border-dark);
    padding: 5px 10px;
    white-space: nowrap;
}

.ticker-item {
    display: inline-flex;
    align-items: center;
    gap: 3px;
}

.ticker-symbol {
    color: var(--theme-terminal-dir);
    font-weight: bold;
}

.ticker-price {
    color: var(--theme-terminal-text);
}

.ticker-arrow.up {
    color: var(--theme-color-success);
}

.ticker-arrow.down {
    color: var(--theme-color-danger);
}

.ticker-arrow.flat {
    color: var(--theme-text-secondary);
}

.ticker-sep {
    color: var(--theme-terminal-dim);
}

/* Floating Amount Indicator */
.amount-floater {
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 12px;
    font-weight: bold;
    pointer-events: none;
    animation: float-up 1s ease-out forwards;
    z-index: 100;
}

.amount-floater.positive {
    color: var(--theme-color-success);
    text-shadow: 1px 1px 0 var(--theme-terminal-bg);
}

.amount-floater.negative {
    color: var(--theme-color-danger);
    text-shadow: 1px 1px 0 var(--theme-terminal-bg);
}

@keyframes float-up {
    0% {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }

    100% {
        opacity: 0;
        transform: translateX(-50%) translateY(-30px);
    }
}

/* HQ Toggle Button */
.hq-toggle {
    font-weight: bold;
    min-width: 70px;
}

/* Toolbar Game Layout */
.toolbar-game {
    display: flex;
    align-items: center;
    gap: 10px;
}

/* Business Panel – right-side drawer */
.business-panel {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    width: 520px;
    max-width: 90%;
    background: var(--theme-surface-primary);
    border-left: 2px inset var(--theme-border-dark);
    padding: 0;
    font-size: 13px;
    display: flex;
    flex-direction: column;
    transform: translateX(100%);
    transition: transform 0.25s ease, width 0.25s ease;
    z-index: 200;
}

.business-panel.open {
    transform: translateX(0);
}

.business-panel.expanded {
    width: 1040px;
}

.business-panel.expanded .business-panel-content {
    flex-direction: row;
    overflow-y: hidden;
}

.business-panel.expanded .panel-col-left,
.business-panel.expanded .panel-col-right {
    flex: 1;
    min-width: 0;
    overflow-y: auto;
}

.business-panel.expanded .upgrades-list {
    max-height: none;
}

.business-panel.expanded .portfolio-list {
    max-height: none;
}

.business-panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--theme-window-title-bg);
    color: var(--theme-window-title-text);
    padding: 4px 8px;
    font-weight: bold;
}

.business-panel-title {
    font-size: 14px;
    font-family: "Courier New", monospace;
}

.business-panel-close {
    background: var(--theme-surface-primary);
    border: 2px outset var(--theme-border-light);
    width: 18px;
    height: 18px;
    font-size: 12px;
    line-height: 1;
    cursor: pointer;
    padding: 0;
}

.business-panel-close:active {
    border-style: inset;
}

.business-panel-header-controls {
    display: flex;
    gap: 4px;
}

.business-panel-expand {
    background: var(--theme-surface-primary);
    border: 2px outset var(--theme-border-light);
    height: 18px;
    font-size: 11px;
    line-height: 1;
    cursor: pointer;
    padding: 2px 8px;
    white-space: nowrap;
    display: none;
}

.business-panel-expand:active {
    border-style: inset;
}

/* News Ticker */
.market-news-ticker {
    background: var(--theme-terminal-bg);
    color: var(--theme-terminal-dir);
    font-family: "Courier New", monospace;
    font-size: 12px;
    padding: 3px 8px;
    overflow: hidden;
    white-space: nowrap;
    border-bottom: 1px solid var(--theme-border-dark);
}

.ticker-text {
    display: inline-block;
    animation: ticker-scroll 30s linear infinite;
}

@keyframes ticker-scroll {
    0% {
        transform: translateX(100%);
    }

    100% {
        transform: translateX(-100%);
    }
}

/* Content Area */
.business-panel-content {
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 8px;
    overflow-y: auto;
}

.panel-col-left {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.panel-col-right {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

/* Chart Section */
.chart-section {
    background: var(--theme-terminal-bg);
    border: 2px inset var(--theme-border-dark);
    padding: 0;
}

.chart-header {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: stretch;
    background: var(--theme-surface-primary);
    border-bottom: 2px inset var(--theme-border-dark);
}

.commodity-tabs {
    display: flex;
    gap: 0;
}

.commodity-tab {
    background: var(--theme-surface-primary);
    border: 1px solid var(--theme-border-dark);
    border-bottom: none;
    padding: 3px 8px;
    font-family: "Courier New", monospace;
    font-size: 11px;
    font-weight: bold;
    cursor: pointer;
    color: var(--theme-text-on-surface);
}

.commodity-tab.active {
    background: var(--theme-terminal-bg);
    color: var(--theme-terminal-text);
    border-bottom: 1px solid var(--theme-terminal-bg);
}

.commodity-tab.locked {
    color: var(--theme-text-secondary);
    cursor: not-allowed;
}

.timescale-tabs {
    display: flex;
    gap: 0;
    align-items: center;
    padding-right: 2px;
}

.timescale-tab {
    background: var(--theme-surface-primary);
    border: 1px solid var(--theme-border-dark);
    border-bottom: none;
    padding: 2px 5px;
    font-family: "Courier New", monospace;
    font-size: 9px;
    font-weight: bold;
    cursor: pointer;
    color: var(--theme-text-secondary);
}

.timescale-tab.active {
    background: var(--theme-terminal-bg);
    color: var(--theme-terminal-info);
    border-bottom: 1px solid var(--theme-terminal-bg);
}

.timescale-tab:hover:not(.active) {
    color: var(--theme-text-on-surface);
}

.chart-wrapper {
    padding: 4px;
    min-height: 180px;
}

.market-chart {
    display: block;
    width: 100%;
    image-rendering: pixelated;
}

/* Trade Section */
.trade-section {
    background: var(--theme-window-content-bg);
    border: 2px inset var(--theme-border-dark);
    padding: 6px;
    color: var(--theme-window-content-text);
}

.trade-info {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 4px;
    font-family: "Courier New", monospace;
}

.trade-commodity {
    font-weight: bold;
    color: var(--theme-terminal-dir);
    background: var(--theme-terminal-bg);
    padding: 2px 5px;
    font-size: 13px;
}

.trade-price {
    font-weight: bold;
    color: var(--theme-color-success);
    font-size: 14px;
}

.trade-holding {
    color: var(--theme-text-secondary);
    font-size: 12px;
}

.trade-buttons {
    display: flex;
    gap: 4px;
}

.trade-btn {
    flex: 1;
    font-size: 12px;
    font-weight: bold;
    padding: 4px 6px;
}

.buy-btn:not(:disabled) {
    color: var(--theme-color-success);
}

.sell-btn:not(:disabled),
.sell-all-btn:not(:disabled) {
    color: var(--theme-color-danger);
}

/* Portfolio Section */
.portfolio-section h3,
.factories-section h3,
.upgrades-section h3,
.influence-section h3 {
    font-size: 13px;
    margin: 0 0 4px;
    padding-bottom: 3px;
    border-bottom: 1px solid var(--theme-border-dark);
}

.portfolio-list {
    background: var(--theme-window-content-bg);
    border: 2px inset var(--theme-border-dark);
    padding: 4px;
    max-height: 100px;
    overflow-y: auto;
}

.portfolio-empty {
    color: var(--theme-text-secondary);
    font-style: italic;
    padding: 6px;
    text-align: center;
    font-size: 12px;
}

.portfolio-row {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 2px 3px;
    border-bottom: 1px solid var(--theme-border-light);
    font-size: 12px;
    font-family: "Courier New", monospace;
}

.portfolio-row:last-child {
    border-bottom: none;
}

.portfolio-ticker {
    font-weight: bold;
    color: var(--theme-window-content-text);
    min-width: 36px;
}

.portfolio-qty {
    color: var(--theme-text-secondary);
    min-width: 30px;
}

.portfolio-avg {
    color: var(--theme-text-secondary);
    min-width: 44px;
}

.portfolio-pl {
    font-weight: bold;
    min-width: 50px;
    text-align: right;
    flex: 1;
}

.portfolio-pl.positive {
    color: var(--theme-color-success);
}

.portfolio-pl.negative {
    color: var(--theme-color-danger);
}

/* ── Phase Locked Teaser ──────────────────────────────────────────────────── */

.phase-locked-teaser {
    font-size: 11px;
    color: var(--theme-text-secondary);
    padding: 6px 8px;
    background: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 4px,
        rgb(0 0 0 / 3%) 4px,
        rgb(0 0 0 / 3%) 8px
    );
    border: 1px dashed var(--theme-border-dark);
    text-align: center;
    font-style: italic;
    opacity: 0.8;
}

/* Factory Section */
.factories-list {
    display: flex;
    flex-direction: column;
    gap: 3px;
}

.factory-card {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 6px;
    background: var(--theme-window-content-bg);
    border: 2px inset var(--theme-border-dark);
    padding: 4px 6px;
}

.factory-info {
    display: flex;
    flex-direction: column;
    gap: 1px;
}

.factory-name {
    font-weight: bold;
    font-size: 12px;
}

.factory-desc {
    color: var(--theme-text-secondary);
    font-size: 11px;
}

.factory-output {
    font-family: "Courier New", monospace;
    font-size: 11px;
    color: var(--theme-color-success);
}

.factory-count {
    font-weight: bold;
    font-size: 11px;
    color: var(--theme-accent);
}

.factory-deploy-btn {
    font-size: 11px;
    white-space: nowrap;
    padding: 3px 8px;
}

/* Upgrade Section */
.upgrades-list {
    display: flex;
    flex-direction: column;
    gap: 3px;
    max-height: 120px;
    overflow-y: auto;
}

.upgrade-btn {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 4px;
    background: var(--theme-surface-primary);
    border: 2px outset var(--theme-border-light);
    padding: 4px 8px;
    cursor: pointer;
    font-size: 12px;
    text-align: left;
}

.upgrade-btn:hover:not(:disabled) {
    background: var(--theme-surface-secondary);
}

.upgrade-btn:active:not(:disabled) {
    border-style: inset;
}

.upgrade-btn.owned {
    background: var(--theme-surface-secondary);
    cursor: default;
}

.upgrade-btn.disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.upgrade-name {
    font-weight: bold;
}

.upgrade-cost {
    color: var(--theme-color-success);
    font-family: "Courier New", monospace;
}

.upgrade-desc {
    flex-basis: 100%;
    color: var(--theme-text-secondary);
    font-size: 11px;
}

.upgrade-badge {
    background: var(--theme-color-success);
    color: var(--theme-accent-text);
    padding: 1px 4px;
    font-size: 11px;
    font-weight: bold;
}

/* Influence Section */
.influence-target {
    font-family: "Courier New", monospace;
    color: var(--theme-terminal-dir);
    font-weight: bold;
    margin-left: 4px;
}

.influence-list {
    display: flex;
    flex-direction: column;
    gap: 3px;
}

.influence-card {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 6px;
    background: var(--theme-window-content-bg);
    border: 2px inset var(--theme-border-dark);
    padding: 4px 6px;
}

.influence-info {
    display: flex;
    flex-direction: column;
    gap: 1px;
}

.influence-name {
    font-weight: bold;
    font-size: 12px;
}

.influence-desc {
    color: var(--theme-text-secondary);
    font-size: 11px;
}

.influence-cost {
    font-family: "Courier New", monospace;
    font-size: 11px;
    color: var(--theme-color-danger);
}

.influence-exec-btn {
    font-size: 11px;
    white-space: nowrap;
    padding: 3px 8px;
}

/* Bonus Popup Styling */
.popup-window.bonus {
    border-color: #ffd700;
}

.popup-window.bonus .window-titlebar {
    background: linear-gradient(90deg, #b8860b, #ffd700);
}

.popup-window.bonus .popup-content h2 {
    color: #b8860b;
}

/* ── Prestige Section ─────────────────────────────────────────────────────── */

.prestige-section {
    margin-top: 12px;
    border-top: 2px solid var(--theme-border-dark);
    padding-top: 8px;
}

.prestige-section h3 {
    margin: 0 0 8px;
    font-size: 14px;
    color: var(--theme-text-on-surface);
}

.prestige-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
    margin-bottom: 8px;
    font-size: 13px;
}

.prestige-stat {
    display: flex;
    justify-content: space-between;
}

.prestige-currency {
    font-weight: 700;
    color: var(--theme-accent);
}

.prestige-trigger-btn {
    width: 100%;
    padding: 8px;
    font-size: 14px;
    font-weight: 700;
    background: linear-gradient(135deg, #6a0dad, #9b30ff);
    color: #ffffff;
    border: 2px outset #9b30ff;
    cursor: pointer;
    margin-bottom: 8px;
    transition: transform 0.1s;
}

.prestige-trigger-btn:hover {
    transform: scale(1.02);
}

.prestige-trigger-btn:active {
    border-style: inset;
    transform: scale(0.98);
}

.prestige-locked {
    text-align: center;
    font-size: 13px;
    color: var(--theme-text-secondary);
    padding: 6px;
    margin-bottom: 8px;
}

.hindsight-shop h4 {
    margin: 0 0 6px;
    font-size: 13px;
    color: var(--theme-accent);
}

.hindsight-item {
    display: block;
    width: 100%;
    text-align: left;
    padding: 6px 8px;
    margin-bottom: 4px;
    font-size: 12px;
    border: 1px solid var(--theme-border-dark);
    background: var(--theme-surface-primary);
    color: var(--theme-text-on-surface);
    cursor: pointer;
}

.hindsight-item:hover:not(.owned, .disabled) {
    background: var(--theme-surface-secondary);
}

.hindsight-item.owned {
    opacity: 0.6;
    cursor: default;
}

.hindsight-item.disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.hindsight-item-header {
    display: flex;
    justify-content: space-between;
    font-weight: 700;
}

.hindsight-item-name {
    color: var(--theme-text-on-surface);
}

.hindsight-cost {
    color: var(--theme-accent);
}

.hindsight-badge {
    color: var(--theme-color-success);
    font-size: 11px;
}

.hindsight-item-desc {
    color: var(--theme-text-secondary);
    margin-top: 2px;
}

.hindsight-item-stacks {
    color: var(--theme-text-secondary);
    font-size: 11px;
    margin-top: 2px;
}

/* Prestige notification toast */
.prestige-toast {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: linear-gradient(135deg, #6a0dad, #9b30ff);
    color: #ffffff;
    padding: 16px 32px;
    font-size: 16px;
    font-weight: 700;
    border-radius: 4px;
    box-shadow: 0 4px 20px rgb(106 13 173 / 50%);
    z-index: 10000;
    animation: prestige-pop 0.4s ease-out;
}

.prestige-toast.fade-out {
    opacity: 0;
    transition: opacity 0.5s;
}

@keyframes prestige-pop {
    from {
        transform: translate(-50%, -50%) scale(0.5);
        opacity: 0;
    }

    to {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
    }
}

/* ── Phase 5: HR / Org Chart ─────────────────────────────────────────────── */

.employees-section {
    border-top: 1px solid var(--theme-border-dark);
    padding-top: 6px;
}

.employees-section h3 {
    font-size: 14px;
    margin: 0 0 6px;
}

/* Hiring pool */
.hr-hiring-pool {
    margin-bottom: 8px;
}

.hr-pool-label {
    font-size: 12px;
    font-weight: 700;
    margin-bottom: 4px;
}

.hr-pool-cards {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    margin-bottom: 4px;
}

.hr-pool-actions {
    display: flex;
    gap: 4px;
}

.hr-refresh-btn {
    padding: 3px 8px;
    font-size: 11px;
    border: 1px outset var(--theme-border-light);
    background: var(--theme-surface-primary);
    color: var(--theme-text-on-surface);
    cursor: pointer;
}

.hr-refresh-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Employee card */
.hr-emp-card {
    padding: 4px 6px;
    border: 1px outset var(--theme-border-light);
    background: var(--theme-surface-primary);
    color: var(--theme-text-on-surface);
    font-size: 11px;
    min-width: 80px;
    position: relative;
    cursor: pointer;
    transition: box-shadow 0.1s;
}

.hr-emp-card:hover {
    box-shadow: 0 0 0 1px var(--theme-link);
}

.hr-emp-card.selected {
    box-shadow: 0 0 0 2px var(--theme-link);
    background: var(--theme-surface-secondary);
}

.hr-emp-card.vp {
    border-width: 2px;
    min-width: 90px;
}

.hr-emp-card.dragging {
    opacity: 0.4;
}

.hr-emp-name {
    font-weight: 700;
    font-size: 11px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100px;
}

.hr-emp-type {
    display: flex;
    align-items: center;
    gap: 2px;
    font-size: 10px;
    color: var(--theme-text-secondary);
}

.hr-emp-type .type-icon {
    font-size: 12px;
}

.hr-emp-bonus {
    font-size: 10px;
    color: var(--theme-color-success);
    margin-top: 1px;
}

.hr-emp-salary {
    font-size: 10px;
    color: var(--theme-color-danger);
    margin-top: 1px;
}

.hr-emp-level {
    font-size: 10px;
    color: var(--theme-color-warning);
}

.hr-hire-cost {
    font-size: 10px;
    font-weight: 700;
    margin-top: 2px;
    color: var(--theme-text-on-surface);
}

/* Org chart tree */
.hr-org-chart {
    margin-bottom: 8px;
}

.hr-org-label {
    font-size: 12px;
    font-weight: 700;
    margin-bottom: 4px;
}

.hr-ceo-row {
    display: flex;
    justify-content: center;
    margin-bottom: 4px;
}

.hr-ceo-card {
    padding: 3px 12px;
    border: 2px outset var(--theme-border-light);
    background: var(--theme-window-title-bg);
    color: var(--theme-window-title-text);
    font-size: 11px;
    font-weight: 700;
    text-align: center;
}

.hr-vp-row {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-bottom: 2px;
}

.hr-vp-column {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
}

.hr-vp-connector {
    width: 1px;
    height: 6px;
    background: var(--theme-border-dark);
}

.hr-ic-row {
    display: flex;
    gap: 2px;
}

/* Empty slot (org chart drop target) */
.hr-slot-empty {
    min-width: 80px;
    min-height: 36px;
    border: 1px dashed var(--theme-border-dark);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    color: var(--theme-text-secondary);
    cursor: pointer;
}

.hr-slot-empty.vp {
    min-width: 90px;
    min-height: 40px;
    border-width: 2px;
}

.hr-slot-empty.drag-over {
    border-color: var(--theme-link);
    background: rgb(51 102 153 / 10%);
}

.hr-slot-empty.locked {
    background: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 4px,
        rgb(0 0 0 / 5%) 4px,
        rgb(0 0 0 / 5%) 8px
    );
    cursor: not-allowed;
}

/* Fire button */
.hr-fire-btn {
    position: absolute;
    top: 1px;
    right: 1px;
    font-size: 9px;
    padding: 0 3px;
    cursor: pointer;
    border: 1px solid var(--theme-border-dark);
    background: var(--theme-surface-primary);
    color: var(--theme-color-danger);
    opacity: 0;
    transition: opacity 0.1s;
    line-height: 1.4;
}

.hr-emp-card:hover .hr-fire-btn {
    opacity: 1;
}

/* Payroll summary */
.hr-payroll {
    font-size: 11px;
    padding: 4px 6px;
    background: var(--theme-surface-primary);
    border: 1px inset var(--theme-border-light);
    margin-bottom: 4px;
}

.hr-payroll-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 1px;
}

.hr-payroll-row .label {
    color: var(--theme-text-secondary);
}

.hr-payroll-row .value {
    font-weight: 700;
}

.hr-payroll-row .value.negative {
    color: var(--theme-color-danger);
}

.hr-payroll-row .value.positive {
    color: var(--theme-color-success);
}

/* Drag ghost */
.hr-drag-ghost {
    position: fixed;
    pointer-events: none;
    opacity: 0.8;
    z-index: 10000;
    transform: rotate(2deg) scale(1.05);
}

/* ── Morale bar ──────────────────────────────────────────────────────── */

.hr-morale-bar {
    width: 100%;
    height: 3px;
    background: var(--theme-border-dark);
    margin-bottom: 2px;
    border-radius: 1px;
    overflow: hidden;
}

.hr-morale-fill {
    height: 100%;
    transition: width 0.3s ease, background 0.3s ease;
    border-radius: 1px;
}

/* Critical morale styling */
.hr-emp-card.morale-critical {
    animation: hr-morale-pulse 1.5s ease-in-out infinite;
}

@keyframes hr-morale-pulse {
    0%, 100% { border-color: var(--theme-border-light); }
    50% { border-color: var(--theme-color-danger); }
}

/* ── Raise pending ───────────────────────────────────────────────────── */

.hr-raise-pending {
    display: flex;
    align-items: center;
    gap: 2px;
    margin-top: 1px;
}

.hr-raise-badge {
    font-size: 11px;
    font-weight: 900;
    color: var(--theme-color-warning);
    animation: hr-raise-pulse 1s ease-in-out infinite;
}

@keyframes hr-raise-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
}

.hr-raise-grant,
.hr-raise-deny {
    font-size: 10px;
    padding: 0 4px;
    cursor: pointer;
    border: 1px solid var(--theme-border-dark);
    background: var(--theme-surface-primary);
    line-height: 1.4;
}

.hr-raise-grant {
    color: var(--theme-color-success);
}

.hr-raise-deny {
    color: var(--theme-color-danger);
}

.hr-raise-grant:hover {
    background: var(--theme-color-success);
    color: var(--theme-surface-primary);
}

.hr-raise-deny:hover {
    background: var(--theme-color-danger);
    color: var(--theme-surface-primary);
}

/* ── Chemistry hints on empty slots ──────────────────────────────────── */

.hr-slot-empty.chem-great {
    border-color: var(--theme-color-success);
    background: rgb(0 180 0 / 8%);
}

.hr-slot-empty.chem-good {
    border-color: var(--theme-color-success);
    background: rgb(0 180 0 / 4%);
}

.hr-slot-empty.chem-poor {
    border-color: var(--theme-color-warning);
    background: rgb(255 160 0 / 6%);
}

.hr-slot-empty.chem-bad {
    border-color: var(--theme-color-danger);
    background: rgb(255 0 0 / 6%);
}

/* ── Morale notifications ────────────────────────────────────────────── */

.hr-notifications {
    margin-bottom: 4px;
}

.hr-notification {
    font-size: 10px;
    padding: 2px 6px;
    background: var(--theme-surface-secondary);
    border-left: 2px solid var(--theme-color-warning);
    margin-bottom: 2px;
    color: var(--theme-text-on-surface);
    animation: hr-notif-in 0.3s ease-out;
}

@keyframes hr-notif-in {
    from {
        opacity: 0;
        transform: translateX(-8px);
    }

    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* ── Phase 6: Structured Products Desk ──────────────────────────────── */

.desk-section {
    border-top: 1px solid var(--theme-border);
    padding-top: 6px;
    margin-top: 6px;
}

.desk-section h3 {
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin: 0 0 6px;
    color: var(--theme-text-primary);
}

.desk-rating-banner {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 6px;
    background: var(--theme-surface-secondary);
    border: 1px solid var(--theme-border);
    margin-bottom: 6px;
    font-size: 11px;
}

.desk-rating-label {
    color: var(--theme-text-secondary);
}

.desk-rating-value {
    font-weight: 700;
    font-size: 13px;
}

.desk-rating-f,
.desk-rating-d {
    color: var(--theme-color-danger);
}

.desk-rating-c {
    color: var(--theme-text-primary);
}

.desk-rating-b {
    color: var(--theme-color-success);
}

.desk-rating-a {
    color: var(--theme-color-success);
}

.desk-rating-aa {
    color: var(--theme-link);
}

.desk-rating-aaa {
    color: var(--theme-accent);
}

.desk-rating-bar {
    display: flex;
    gap: 2px;
    margin-left: auto;
    font-size: 9px;
}

.desk-notch {
    padding: 1px 3px;
    background: var(--theme-surface-primary);
    border: 1px solid var(--theme-border);
    color: var(--theme-text-secondary);
    opacity: 0.4;
}

.desk-notch.filled {
    opacity: 1;
    background: var(--theme-surface-secondary);
    color: var(--theme-text-primary);
    font-weight: 600;
}

.desk-summary {
    display: flex;
    gap: 8px;
    font-size: 10px;
    padding: 3px 6px;
    background: var(--theme-surface-primary);
    border: 1px solid var(--theme-border);
    margin-bottom: 6px;
    color: var(--theme-text-secondary);
}

.desk-summary b {
    color: var(--theme-text-primary);
}

.desk-positive {
    color: var(--theme-color-success) !important;
}

.desk-negative {
    color: var(--theme-color-danger) !important;
}

.desk-subsection {
    margin-bottom: 6px;
}

.desk-subsection h4 {
    font-size: 11px;
    font-weight: 600;
    margin: 0 0 4px;
    color: var(--theme-text-primary);
}

.desk-das-list {
    display: flex;
    flex-direction: column;
    gap: 3px;
    margin-bottom: 6px;
}

.desk-das-item {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 3px 6px;
    background: var(--theme-surface-secondary);
    border: 1px solid var(--theme-border);
    font-size: 10px;
}

.desk-das-header {
    display: flex;
    align-items: center;
    gap: 4px;
    min-width: 80px;
}

.desk-das-id {
    font-weight: 600;
    font-family: monospace;
    font-size: 10px;
}

.desk-das-status {
    font-weight: 700;
    font-size: 9px;
    padding: 1px 3px;
    border-radius: 2px;
}

.desk-healthy {
    color: var(--theme-color-success);
}

.desk-warning {
    color: var(--theme-color-warning);
}

.desk-critical {
    color: var(--theme-color-danger);
    animation: desk-blink 0.8s infinite;
}

@keyframes desk-blink {
    50% {
        opacity: 0.5;
    }
}

.desk-das-detail {
    flex: 1;
    color: var(--theme-text-secondary);
}

.desk-note {
    font-size: 10px;
    color: var(--theme-text-secondary);
    font-style: italic;
    padding: 4px 0;
}

.desk-btn {
    font-size: 10px;
    padding: 3px 8px;
    background: var(--theme-surface-primary);
    border: 1px solid var(--theme-border);
    color: var(--theme-text-primary);
    cursor: pointer;
}

.desk-btn:hover:not(:disabled) {
    background: var(--theme-surface-secondary);
}

.desk-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.desk-create-form,
.desk-control-row {
    display: flex;
    gap: 4px;
    align-items: center;
    margin-top: 4px;
}

.desk-commodity-select,
.desk-qty-input,
.desk-borrow-input,
.desk-repay-input {
    font-size: 10px;
    padding: 2px 4px;
    border: 1px solid var(--theme-border);
    background: var(--theme-surface-primary);
    color: var(--theme-text-primary);
}

.desk-qty-input,
.desk-borrow-input,
.desk-repay-input {
    width: 60px;
}

.desk-facility-summary {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    font-size: 10px;
    padding: 3px 6px;
    background: var(--theme-surface-primary);
    border: 1px solid var(--theme-border);
    margin-bottom: 4px;
    color: var(--theme-text-secondary);
}

.desk-facility-summary b {
    color: var(--theme-text-primary);
}

.desk-ratio {
    font-size: 10px;
    padding: 2px 6px;
    margin-bottom: 4px;
    font-weight: 600;
}

.desk-ratio.desk-healthy {
    color: var(--theme-color-success);
}

.desk-ratio.desk-warning {
    color: var(--theme-color-warning);
    border-left: 2px solid var(--theme-color-warning);
}

.desk-ratio.desk-critical {
    color: var(--theme-color-danger);
    background: rgb(198 40 40 / 8%);
    border-left: 2px solid var(--theme-color-danger);
    animation: desk-blink 0.8s infinite;
}

.desk-rates-table {
    margin-top: 6px;
}

.desk-rates-table table {
    width: 100%;
    font-size: 9px;
    border-collapse: collapse;
}

.desk-rates-table th,
.desk-rates-table td {
    padding: 2px 4px;
    border: 1px solid var(--theme-border);
    text-align: center;
}

.desk-rates-table th {
    background: var(--theme-surface-secondary);
    font-weight: 600;
}

.desk-current-rating {
    background: var(--theme-surface-secondary);
    font-weight: 700;
}
